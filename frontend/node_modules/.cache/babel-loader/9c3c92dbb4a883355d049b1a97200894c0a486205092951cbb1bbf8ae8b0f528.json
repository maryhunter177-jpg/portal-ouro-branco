{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ouro Branco\\\\Desktop\\\\ourobranco-site\\\\frontend\\\\src\\\\context\\\\CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// frontend/src/context/CartContext.js\n\nimport React, { createContext, useState, useContext, useEffect, useCallback } from 'react';\n\n// 1. Criação do Contexto\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext();\n\n// Hook customizado para fácil acesso\nexport const useCart = () => {\n  _s();\n  return useContext(CartContext);\n};\n\n// 2. Componente Provedor (Provider)\n_s(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const CartProvider = ({\n  children\n}) => {\n  _s2();\n  // Estado para armazenar os produtos no carrinho\n  // Estrutura: [{ produto: {}, quantidade: 1, id: '123' }, ...]\n  const [cartItems, setCartItems] = useState(() => {\n    // Tenta carregar o carrinho do armazenamento local ao iniciar\n    const storedCart = localStorage.getItem('ourobranco_cart');\n    return storedCart ? JSON.parse(storedCart) : [];\n  });\n\n  // Estado para controlar se o menu lateral está aberto\n  const [isCartOpen, setIsCartOpen] = useState(false);\n\n  // Efeito para persistir o carrinho no localStorage sempre que cartItems mudar\n  useEffect(() => {\n    localStorage.setItem('ourobranco_cart', JSON.stringify(cartItems));\n  }, [cartItems]);\n\n  // --- Funções Principais ---\n\n  // Calcula o valor total do carrinho\n  const calculateTotal = useCallback(() => {\n    return cartItems.reduce((total, item) => total + item.produto.preco * item.quantidade, 0);\n  }, [cartItems]);\n\n  // Calcula a quantidade total de itens (contagem de produtos)\n  const getTotalItemsCount = useCallback(() => {\n    return cartItems.reduce((count, item) => count + item.quantidade, 0);\n  }, [cartItems]);\n\n  // Adiciona ou incrementa um produto no carrinho\n  const addToCart = (product, quantity = 1) => {\n    setCartItems(prevItems => {\n      const exists = prevItems.find(item => item.produto.id === product.id);\n      if (exists) {\n        // Se o produto já existe, apenas atualiza a quantidade\n        return prevItems.map(item => item.produto.id === product.id ? {\n          ...item,\n          quantidade: item.quantidade + quantity\n        } : item);\n      } else {\n        // Se é um novo produto, adiciona\n        return [...prevItems, {\n          produto: product,\n          quantidade: quantity\n        }];\n      }\n    });\n    // Abre o menu do carrinho após adicionar um item\n    setIsCartOpen(true);\n  };\n\n  // Remove um item do carrinho\n  const removeFromCart = productId => {\n    setCartItems(prevItems => prevItems.filter(item => item.produto.id !== productId));\n  };\n\n  // Limpa o carrinho completamente (usado após a finalização da compra)\n  const clearCart = () => {\n    setCartItems([]);\n  };\n\n  // --- Funções de UI ---\n  const toggleCart = () => {\n    setIsCartOpen(prev => !prev);\n  };\n\n  // 3. Objeto de valor para o Contexto\n  const contextValue = {\n    cartItems,\n    isCartOpen,\n    total: calculateTotal(),\n    itemCount: getTotalItemsCount(),\n    addToCart,\n    removeFromCart,\n    clearCart,\n    toggleCart,\n    setIsCartOpen\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: contextValue,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n};\n_s2(CartProvider, \"iShSGFZd77qBI76nMuX/vwsdnSQ=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","useCallback","jsxDEV","_jsxDEV","CartContext","useCart","_s","CartProvider","children","_s2","cartItems","setCartItems","storedCart","localStorage","getItem","JSON","parse","isCartOpen","setIsCartOpen","setItem","stringify","calculateTotal","reduce","total","item","produto","preco","quantidade","getTotalItemsCount","count","addToCart","product","quantity","prevItems","exists","find","id","map","removeFromCart","productId","filter","clearCart","toggleCart","prev","contextValue","itemCount","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Ouro Branco/Desktop/ourobranco-site/frontend/src/context/CartContext.js"],"sourcesContent":["// frontend/src/context/CartContext.js\r\n\r\nimport React, { createContext, useState, useContext, useEffect, useCallback } from 'react';\r\n\r\n// 1. Criação do Contexto\r\nexport const CartContext = createContext();\r\n\r\n// Hook customizado para fácil acesso\r\nexport const useCart = () => {\r\n  return useContext(CartContext);\r\n};\r\n\r\n// 2. Componente Provedor (Provider)\r\nexport const CartProvider = ({ children }) => {\r\n  // Estado para armazenar os produtos no carrinho\r\n  // Estrutura: [{ produto: {}, quantidade: 1, id: '123' }, ...]\r\n  const [cartItems, setCartItems] = useState(() => {\r\n    // Tenta carregar o carrinho do armazenamento local ao iniciar\r\n    const storedCart = localStorage.getItem('ourobranco_cart');\r\n    return storedCart ? JSON.parse(storedCart) : [];\r\n  });\r\n  \r\n  // Estado para controlar se o menu lateral está aberto\r\n  const [isCartOpen, setIsCartOpen] = useState(false);\r\n\r\n  // Efeito para persistir o carrinho no localStorage sempre que cartItems mudar\r\n  useEffect(() => {\r\n    localStorage.setItem('ourobranco_cart', JSON.stringify(cartItems));\r\n  }, [cartItems]);\r\n\r\n  // --- Funções Principais ---\r\n\r\n  // Calcula o valor total do carrinho\r\n  const calculateTotal = useCallback(() => {\r\n    return cartItems.reduce((total, item) => \r\n      total + (item.produto.preco * item.quantidade), 0\r\n    );\r\n  }, [cartItems]);\r\n  \r\n  // Calcula a quantidade total de itens (contagem de produtos)\r\n  const getTotalItemsCount = useCallback(() => {\r\n      return cartItems.reduce((count, item) => count + item.quantidade, 0);\r\n  }, [cartItems]);\r\n\r\n  // Adiciona ou incrementa um produto no carrinho\r\n  const addToCart = (product, quantity = 1) => {\r\n    setCartItems(prevItems => {\r\n      const exists = prevItems.find(item => item.produto.id === product.id);\r\n\r\n      if (exists) {\r\n        // Se o produto já existe, apenas atualiza a quantidade\r\n        return prevItems.map(item =>\r\n          item.produto.id === product.id\r\n            ? { ...item, quantidade: item.quantidade + quantity }\r\n            : item\r\n        );\r\n      } else {\r\n        // Se é um novo produto, adiciona\r\n        return [...prevItems, { produto: product, quantidade: quantity }];\r\n      }\r\n    });\r\n    // Abre o menu do carrinho após adicionar um item\r\n    setIsCartOpen(true); \r\n  };\r\n\r\n  // Remove um item do carrinho\r\n  const removeFromCart = (productId) => {\r\n    setCartItems(prevItems => \r\n      prevItems.filter(item => item.produto.id !== productId)\r\n    );\r\n  };\r\n\r\n  // Limpa o carrinho completamente (usado após a finalização da compra)\r\n  const clearCart = () => {\r\n    setCartItems([]);\r\n  };\r\n\r\n  // --- Funções de UI ---\r\n  const toggleCart = () => {\r\n    setIsCartOpen(prev => !prev);\r\n  };\r\n\r\n  // 3. Objeto de valor para o Contexto\r\n  const contextValue = {\r\n    cartItems,\r\n    isCartOpen,\r\n    total: calculateTotal(),\r\n    itemCount: getTotalItemsCount(),\r\n    addToCart,\r\n    removeFromCart,\r\n    clearCart,\r\n    toggleCart,\r\n    setIsCartOpen,\r\n  };\r\n\r\n  return (\r\n    <CartContext.Provider value={contextValue}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};"],"mappings":";;;AAAA;;AAEA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;;AAE1F;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,OAAO,MAAMC,WAAW,gBAAGP,aAAa,CAAC,CAAC;;AAE1C;AACA,OAAO,MAAMQ,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,OAAOP,UAAU,CAACK,WAAW,CAAC;AAChC,CAAC;;AAED;AAAAE,EAAA,CAJaD,OAAO;AAKpB,OAAO,MAAME,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,GAAA;EAC5C;EACA;EACA,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGb,QAAQ,CAAC,MAAM;IAC/C;IACA,MAAMc,UAAU,GAAGC,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC;IAC1D,OAAOF,UAAU,GAAGG,IAAI,CAACC,KAAK,CAACJ,UAAU,CAAC,GAAG,EAAE;EACjD,CAAC,CAAC;;EAEF;EACA,MAAM,CAACK,UAAU,EAAEC,aAAa,CAAC,GAAGpB,QAAQ,CAAC,KAAK,CAAC;;EAEnD;EACAE,SAAS,CAAC,MAAM;IACda,YAAY,CAACM,OAAO,CAAC,iBAAiB,EAAEJ,IAAI,CAACK,SAAS,CAACV,SAAS,CAAC,CAAC;EACpE,CAAC,EAAE,CAACA,SAAS,CAAC,CAAC;;EAEf;;EAEA;EACA,MAAMW,cAAc,GAAGpB,WAAW,CAAC,MAAM;IACvC,OAAOS,SAAS,CAACY,MAAM,CAAC,CAACC,KAAK,EAAEC,IAAI,KAClCD,KAAK,GAAIC,IAAI,CAACC,OAAO,CAACC,KAAK,GAAGF,IAAI,CAACG,UAAW,EAAE,CAClD,CAAC;EACH,CAAC,EAAE,CAACjB,SAAS,CAAC,CAAC;;EAEf;EACA,MAAMkB,kBAAkB,GAAG3B,WAAW,CAAC,MAAM;IACzC,OAAOS,SAAS,CAACY,MAAM,CAAC,CAACO,KAAK,EAAEL,IAAI,KAAKK,KAAK,GAAGL,IAAI,CAACG,UAAU,EAAE,CAAC,CAAC;EACxE,CAAC,EAAE,CAACjB,SAAS,CAAC,CAAC;;EAEf;EACA,MAAMoB,SAAS,GAAGA,CAACC,OAAO,EAAEC,QAAQ,GAAG,CAAC,KAAK;IAC3CrB,YAAY,CAACsB,SAAS,IAAI;MACxB,MAAMC,MAAM,GAAGD,SAAS,CAACE,IAAI,CAACX,IAAI,IAAIA,IAAI,CAACC,OAAO,CAACW,EAAE,KAAKL,OAAO,CAACK,EAAE,CAAC;MAErE,IAAIF,MAAM,EAAE;QACV;QACA,OAAOD,SAAS,CAACI,GAAG,CAACb,IAAI,IACvBA,IAAI,CAACC,OAAO,CAACW,EAAE,KAAKL,OAAO,CAACK,EAAE,GAC1B;UAAE,GAAGZ,IAAI;UAAEG,UAAU,EAAEH,IAAI,CAACG,UAAU,GAAGK;QAAS,CAAC,GACnDR,IACN,CAAC;MACH,CAAC,MAAM;QACL;QACA,OAAO,CAAC,GAAGS,SAAS,EAAE;UAAER,OAAO,EAAEM,OAAO;UAAEJ,UAAU,EAAEK;QAAS,CAAC,CAAC;MACnE;IACF,CAAC,CAAC;IACF;IACAd,aAAa,CAAC,IAAI,CAAC;EACrB,CAAC;;EAED;EACA,MAAMoB,cAAc,GAAIC,SAAS,IAAK;IACpC5B,YAAY,CAACsB,SAAS,IACpBA,SAAS,CAACO,MAAM,CAAChB,IAAI,IAAIA,IAAI,CAACC,OAAO,CAACW,EAAE,KAAKG,SAAS,CACxD,CAAC;EACH,CAAC;;EAED;EACA,MAAME,SAAS,GAAGA,CAAA,KAAM;IACtB9B,YAAY,CAAC,EAAE,CAAC;EAClB,CAAC;;EAED;EACA,MAAM+B,UAAU,GAAGA,CAAA,KAAM;IACvBxB,aAAa,CAACyB,IAAI,IAAI,CAACA,IAAI,CAAC;EAC9B,CAAC;;EAED;EACA,MAAMC,YAAY,GAAG;IACnBlC,SAAS;IACTO,UAAU;IACVM,KAAK,EAAEF,cAAc,CAAC,CAAC;IACvBwB,SAAS,EAAEjB,kBAAkB,CAAC,CAAC;IAC/BE,SAAS;IACTQ,cAAc;IACdG,SAAS;IACTC,UAAU;IACVxB;EACF,CAAC;EAED,oBACEf,OAAA,CAACC,WAAW,CAAC0C,QAAQ;IAACC,KAAK,EAAEH,YAAa;IAAApC,QAAA,EACvCA;EAAQ;IAAAwC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAAC1C,GAAA,CAvFWF,YAAY;AAAA6C,EAAA,GAAZ7C,YAAY;AAAA,IAAA6C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}