{"ast":null,"code":"// backend/controllers/produto-index-controller.js\n\nconst fs = require('fs');\nconst path = require('path');\n\n// Garante que o Node consiga encontrar o arquivo\nexports.getProdutosIndex = (req, res) => {\n  try {\n    const produtosPath = path.join(process.cwd(), 'data', 'produtos-index.json');\n    const data = fs.readFileSync(produtosPath, 'utf8');\n    const produtos = JSON.parse(data); // AGORA ISSO FUNCIONARÁ\n\n    return res.json({\n      produtos: produtos.produtos\n    }); // RETORNA O ARRAY DENTRO DA CHAVE \"PRODUTOS\"\n  } catch (error) {\n    console.error('ERRO INTERNO NA LEITURA DO JSON:', error.message);\n    return res.status(500).json({\n      message: 'Erro interno do servidor ao carregar o índice de produtos.',\n      detailedError: error.message\n    });\n  }\n};","map":{"version":3,"names":["fs","require","path","exports","getProdutosIndex","req","res","produtosPath","join","process","cwd","data","readFileSync","produtos","JSON","parse","json","error","console","message","status","detailedError"],"sources":["C:/Users/Ouro Branco/Desktop/ourobranco-site/frontend/src/App.jsx"],"sourcesContent":["// backend/controllers/produto-index-controller.js\r\n\r\nconst fs = require('fs');\r\nconst path = require('path');\r\n\r\n// Garante que o Node consiga encontrar o arquivo\r\nexports.getProdutosIndex = (req, res) => {\r\n    try {\r\n        const produtosPath = path.join(process.cwd(), 'data', 'produtos-index.json');\r\n        \r\n        const data = fs.readFileSync(produtosPath, 'utf8');\r\n        const produtos = JSON.parse(data); // AGORA ISSO FUNCIONARÁ\r\n        \r\n        return res.json({ produtos: produtos.produtos }); // RETORNA O ARRAY DENTRO DA CHAVE \"PRODUTOS\"\r\n        \r\n    } catch (error) {\r\n        console.error('ERRO INTERNO NA LEITURA DO JSON:', error.message);\r\n        return res.status(500).json({ \r\n            message: 'Erro interno do servidor ao carregar o índice de produtos.', \r\n            detailedError: error.message\r\n        });\r\n    }\r\n};"],"mappings":"AAAA;;AAEA,MAAMA,EAAE,GAAGC,OAAO,CAAC,IAAI,CAAC;AACxB,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;;AAE5B;AACAE,OAAO,CAACC,gBAAgB,GAAG,CAACC,GAAG,EAAEC,GAAG,KAAK;EACrC,IAAI;IACA,MAAMC,YAAY,GAAGL,IAAI,CAACM,IAAI,CAACC,OAAO,CAACC,GAAG,CAAC,CAAC,EAAE,MAAM,EAAE,qBAAqB,CAAC;IAE5E,MAAMC,IAAI,GAAGX,EAAE,CAACY,YAAY,CAACL,YAAY,EAAE,MAAM,CAAC;IAClD,MAAMM,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACJ,IAAI,CAAC,CAAC,CAAC;;IAEnC,OAAOL,GAAG,CAACU,IAAI,CAAC;MAAEH,QAAQ,EAAEA,QAAQ,CAACA;IAAS,CAAC,CAAC,CAAC,CAAC;EAEtD,CAAC,CAAC,OAAOI,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAACE,OAAO,CAAC;IAChE,OAAOb,GAAG,CAACc,MAAM,CAAC,GAAG,CAAC,CAACJ,IAAI,CAAC;MACxBG,OAAO,EAAE,4DAA4D;MACrEE,aAAa,EAAEJ,KAAK,CAACE;IACzB,CAAC,CAAC;EACN;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}